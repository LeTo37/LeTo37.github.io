---
layout: default
modal-id: 2
title: Mario Kart
date: 2019-06-23
img: Mario_Kart.png
alt: image-alt
project-date: June 2019
description: <h2> Overview </h2> This Mario Kart project was undertaken with the following two main objectives in mind from the start<span>&#58;</span> <br><ul><li>The robot must follow a line mapped out on the floor</li><li> The robot must be unique and look great! </li></ul> All Mechanical Designs and Code for this project can be found <a href=https://github.com/LeTo37/Levi_Todes_ME433>here.</a> <br><h2> Design Constraints</h2> The following were the contsraints given for the design of the robot<span>&#58;</span> <br><ul><li> The robot must be wheeled</li><li> Line sensing must be done with the provided USB camera.</li><li>Only two servo motors may be used to propel the robot. </li><li>Control of the robot will be done with a <a href=http://ww1.microchip.com/downloads/en/DeviceDoc/PIC32MX1XX2XX-28-36-44-PIN-DS60001168K.pdf>PIC32MX270F256D</a> microcontroller.</li></ul><p align="center"> <img src="img/portfolio/mario_kart.gif" height="75%" width="75%"> </p> <br><h2> Hardware </h2> All mechanical design of this robot was done using <a href=https://www.onshape.com/>Onshape.</a> - a browser based CAD software. Electronic and PCB design was done with <a href=https://www.autodesk.com/products/eagle/overview>Eagle.</a> <br><h3>Mechanical</h3> All CAD designs of all the parts necessary to construct this robot are included <a href=https://github.com/LeTo37/Levi_Todes_ME433/tree/master/HW16>here.</a> But the main components are described a little below. <br><h4>Body, Wheels and Camera Mount</h4> The body shown below is made out of laser cut plywood. The front fender is 3d printed PLA plastic. The body was designed to house the electronics, battery, servo motors and LCD screen in such a way that keeps the weight of the vehicle in balance.<p align="center"> <script src="https://embed.github.com/view/3d/LeTo37/Levi_Todes_ME433/master/HW16/base_with_fender.stl?height=360&width=500"></script></p> The wheels were designed to look like Mario Kart wheels with a big M in the center. These were 3d printed out of PLA plastic. <p align="left"> <script src="https://embed.github.com/view/3d/LeTo37/Levi_Todes_ME433/master/HW16/mario_wheels.stl?height=300&width=400"> </script> <img src="img/portfolio/mario_wheel.png" height="35%" width="35%"></p> The camera mount was made out of laser cut plywood with a 3d printed PLA plastic Mario badge in its center. This was a necessary feature as functional holder of the camera as well as a style feature as it fits well within the Mario Kart theme.<p align="left"> <script src="https://embed.github.com/view/3d/LeTo37/Levi_Todes_ME433/master/HW16/Camera_Holder.stl?height=300&width=400"> </script> <img src="img/portfolio/Camera_Holder.png" height="35%" width="35%"></p> <h4>Koopa Cannons</h4>The next feature added purely for a little bit of style and fun were Cannons that shoot little Koopa Shells out of the back of the robot - like in Mario Kart. The cannons and Koopa shells both were 3d printed with PLA plastic. <p align="left"> <script src="https://embed.github.com/view/3d/LeTo37/Levi_Todes_ME433/master/HW16/cannon.stl?height=300&width=400"> </script> <img src="img/portfolio/cannon.png" height="35%" width="35%"></p><h4>Final</h4>The final CAD design of the Mario Kart can be seen in its entirety below. <p align="center"> <script src="https://embed.github.com/view/3d/LeTo37/Levi_Todes_ME433/master/HW16/MARIO_KART.stl?height=360&width=500"></script></p> <h3>Electrical</h3> As mentioned before, the control of this robot was done using the <a href=http://ww1.microchip.com/downloads/en/DeviceDoc/PIC32MX1XX2XX-28-36-44-PIN-DS60001168K.pdf>PIC32MX270F256D</a>microcontroller. In order to interact with the microcontroller and the peripherals necessary to operate the robot (camera, lcd, motors), a PCB was developed. Below is an upclose view of the PCB.<p align="center"><img src="img/portfolio/mario_pcb.png" width="450" /></p><br> The motors were driven with PWM signals through an H-bridge. The LCD communication protocol used was SPI. The communication protocol used to speak to the camera was I2C. Below is a broader image of the pcb and the connected peripherals. <p align="center"><img src="img/portfolio/mario_electronics.png" width="450" /></p> A further circuit, seen in the above images, was necessary to drive the solenoids used in the Koopa shell cannons. This solenoid driver circuit is shown below. <p align="center"> <img src="img/portfolio/SolenoidDriver.png" width="200" /></p><h2> Software</h2>All the code used in order to control the robot was C code used to program the <a href=http://ww1.microchip.com/downloads/en/DeviceDoc/PIC32MX1XX2XX-28-36-44-PIN-DS60001168K.pdf>PIC32MX270F256D</a>microcontroller. The code necessary was code such that the microcontroller could communicate with the camera and recieve line following information from it. This information was then displayed on the LCD screen for testing. Using this information, a control loop was developed such that the duty cycle of the PWM signals sent through the h-bridge to the motors varied according where the black line was in relation to the camera. This allowed for the mario kart to follow the line. The triggering of the solenoid based Koopa shell cannons was set to go off at a random time after the robot was moving. All the code used can be found <a href=https://github.com/LeTo37/Levi_Todes_ME433/tree/master/HW16/HW16.X>here.</a>

---

